var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,s=(e,s)=>{for(var r in s||(s={}))t.call(s,r)&&n(e,r,s[r]);if(a)for(var r of a(s))o.call(s,r)&&n(e,r,s[r]);return e};import{V as r,al as i,am as l,E as m,M as u,G as d,f as c,g as p,o as f,c as b,w as h,j as _,m as v,t as y,I as D,ak as g,N as V,D as j,e as O}from"./vendor.8a7e56dc.js";import{_ as k,a as w,b as x}from"./index.756c4e22.js";import{v as I}from"./uni-id-permissions.93a337dd.js";const C=r.database();C.command;function $(e){let a={};for(let t in I)e.includes(t)&&(a[t]=I[t]);return a}var E=k({data(){let e={permission_id:"",permission_name:"",comment:""};return{formData:e,formOptions:{},rules:s({},$(Object.keys(e)))}},onReady(){this.$refs.form.setRules(this.rules)},methods:{submit(){i({mask:!0}),this.$refs.form.validate().then((e=>{this.submitForm(e)})).catch((()=>{l()}))},submitForm(e){C.collection("uni-id-permissions").add(e).then((e=>{m({title:"新增成功"}),this.getOpenerEventChannel().emit("refreshData"),setTimeout((()=>u()),500)})).catch((e=>{d({content:e.message||"请求服务失败",showCancel:!1})})).finally((()=>{l()}))}}},[["render",function(e,a,t,o,n,s){const r=D,i=c(p("uni-forms-item"),w),l=g,m=V,u=j,d=O,k=c(p("uni-forms"),x);return f(),b(d,{class:"uni-container"},{default:h((()=>[_(k,{ref:"form",value:n.formData,validateTrigger:"bind"},{default:h((()=>[_(i,{name:"permission_id",label:"权限ID",required:""},{default:h((()=>[_(r,{placeholder:"权限唯一标识，不可修改，不允许重复",onInput:a[0]||(a[0]=a=>e.binddata("permission_id",a.detail.value)),class:"uni-input-border",modelValue:n.formData.permission_id,"onUpdate:modelValue":a[1]||(a[1]=e=>n.formData.permission_id=e),trim:"both"},null,8,["modelValue"])])),_:1}),_(i,{name:"permission_name",label:"权限名称",required:""},{default:h((()=>[_(r,{placeholder:"权限名称",onInput:a[2]||(a[2]=a=>e.binddata("permission_name",a.detail.value)),class:"uni-input-border",modelValue:n.formData.permission_name,"onUpdate:modelValue":a[3]||(a[3]=e=>n.formData.permission_name=e),trim:"both"},null,8,["modelValue"])])),_:1}),_(i,{name:"comment",label:"备注"},{default:h((()=>[_(l,{placeholder:"备注",onInput:a[4]||(a[4]=a=>e.binddata("comment",a.detail.value)),class:"uni-textarea-border",modelValue:n.formData.comment,"onUpdate:modelValue":a[5]||(a[5]=e=>n.formData.comment=e),trim:"both"},null,8,["modelValue"])])),_:1}),_(d,{class:"uni-button-group"},{default:h((()=>[_(m,{type:"primary",class:"uni-button",style:{width:"100px"},onClick:s.submit},{default:h((()=>[v(y(e.$t("common.button.submit")),1)])),_:1},8,["onClick"]),_(u,{"open-type":"navigateBack",style:{"margin-left":"15px"}},{default:h((()=>[_(m,{class:"uni-button",style:{width:"100px"}},{default:h((()=>[v(y(e.$t("common.button.back")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["value"])])),_:1})}]]);export{E as default};
