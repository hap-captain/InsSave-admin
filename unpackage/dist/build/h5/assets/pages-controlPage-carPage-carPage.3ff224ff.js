import{V as e,S as a,G as t,E as l,f as n,g as i,o as s,c as o,w as d,j as c,m as r,t as u,q as h,s as g,F as p,e as f,I as m,N as _}from"./vendor.8a7e56dc.js";import{_ as C,d as y,e as b,f as x,h as k}from"./index.756c4e22.js";import{_ as D}from"./uni-pagination.7b89d6b3.js";const w=e.database();var z=C({data:()=>({searchVal:"",carData:[],pageSize:10,pageCurrent:1,total:0,loading:!1}),onLoad(){this.selectedIndexs=[],this.getCarData(1)},methods:{selectedItems(){return this.selectedIndexs.map((e=>this.tableData[e]))},selectionChange(e){console.log(e.detail.index),this.selectedIndexs=e.detail.index},delTable(){console.log(this.selectedItems())},change(e){this.getCarData(e.current)},search(){this.getCarData(1,this.searchVal)},addPeople(){a({url:"addCar"})},edit(e){a({url:"editCar?id="+e})},dele(e){t({title:"提示",content:"你确定要删除这条记录吗？",success:function(a){a.confirm?w.collection("carList").doc(e).remove().then((e=>{l({title:"删除成功！",duration:2e3}),setTimeout(this.getCarData(),2e3)})):a.cancel&&console.log("用户点击取消")}})},getCarData(e,a){this.loading=!0,this.pageCurrent=e,w.collection("carList").where({carId:a}).get().then((e=>{this.carData=e.result.data,this.total=e.result.data.length,this.loading=!1}))}}},[["render",function(e,a,t,l,C,w){const z=f,I=m,V=_,S=n(i("uni-th"),y),j=n(i("uni-tr"),b),T=n(i("uni-td"),x),v=n(i("uni-table"),k),L=n(i("uni-pagination"),D);return s(),o(z,null,{default:d((()=>[c(z,{class:"uni-header"},{default:d((()=>[c(z,{class:"uni-group hide-on-phone"},{default:d((()=>[c(z,{class:"uni-title"},{default:d((()=>[r("车辆信息")])),_:1})])),_:1}),c(z,{class:"uni-group"},{default:d((()=>[c(I,{class:"uni-search",type:"text",modelValue:C.searchVal,"onUpdate:modelValue":a[0]||(a[0]=e=>C.searchVal=e),onConfirm:w.search,placeholder:e.$t("common.placeholder.query")},null,8,["modelValue","onConfirm","placeholder"]),c(V,{class:"uni-button",type:"default",size:"mini",onClick:w.search},{default:d((()=>[r(u(e.$t("common.button.search")),1)])),_:1},8,["onClick"]),c(V,{class:"uni-button",size:"mini",type:"primary",onClick:w.addPeople},{default:d((()=>[r("添加")])),_:1},8,["onClick"])])),_:1})])),_:1}),c(z,{class:"uni-container"},{default:d((()=>[c(v,{loading:C.loading,border:"",stripe:"",type:"selection",emptyText:e.$t("common.empty"),onSelectionChange:w.selectionChange},{default:d((()=>[c(j,null,{default:d((()=>[c(S,{width:"204",align:"center"},{default:d((()=>[r("车辆编号")])),_:1}),c(S,{width:"100",align:"center"},{default:d((()=>[r("车辆描述")])),_:1}),c(S,{width:"204",align:"center"},{default:d((()=>[r("可参与救援类型")])),_:1}),c(S,{width:"204",align:"center"},{default:d((()=>[r("车辆状态")])),_:1}),c(S,{width:"204",align:"center"},{default:d((()=>[r("操作")])),_:1})])),_:1}),(s(!0),h(p,null,g(C.carData,((e,a)=>(s(),o(j,{key:a},{default:d((()=>[c(T,null,{default:d((()=>[r(u(e.carId),1)])),_:2},1024),c(T,null,{default:d((()=>[r(u(e.describe),1)])),_:2},1024),c(T,null,{default:d((()=>[r(u(e.type),1)])),_:2},1024),c(T,null,{default:d((()=>[r(u(e.status),1)])),_:2},1024),c(T,null,{default:d((()=>[c(z,{class:"uni-group"},{default:d((()=>[c(V,{class:"uni-button",size:"mini",type:"primary",onClick:a=>w.edit(e._id)},{default:d((()=>[r("编辑")])),_:2},1032,["onClick"]),c(V,{class:"uni-button",size:"mini",type:"primary",style:{"background-color":"red"},onClick:a=>w.dele(e._id)},{default:d((()=>[r("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["loading","emptyText","onSelectionChange"]),c(z,{class:"uni-pagination-box"},{default:d((()=>[c(L,{"show-icon":"","page-size":C.pageSize,current:C.pageCurrent,total:C.total,onChange:w.change},null,8,["page-size","current","total","onChange"])])),_:1})])),_:1})])),_:1})}]]);export{z as default};
