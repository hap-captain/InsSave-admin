import{V as t,E as a,o as l,c as e,w as d,j as s,m as u,t as o,B as n,d as i,e as c,i as f,aj as _,ai as r,ak as p,N as h,T as y}from"./vendor.8a7e56dc.js";import{_ as g}from"./index.756c4e22.js";const m=t.database();var b=g({data:()=>({data:{},latitude:"",longitude:"",id:"",route:""}),onLoad(t){this.id=t.id,this.getData(t.id)},methods:{getData(t){m.collection("mathList").doc(t).get().then((t=>{this.data=t.result.data[0],console.log(t.result.data[0]),this.latitude=t.result.data[0].latitude,this.longitude=t.result.data[0].longitude}))},changData(t){var l=this;1==t?m.collection("mathList").doc(this.id).update({sept1:!0,status:"处理中"}).then((t=>{a({title:"已应答",duration:2e3}),l.getData(l.id)})):2==t?m.collection("mathList").doc(this.id).update({sept2:!0}).then((t=>{a({title:"已确定",duration:2e3}),l.getData(l.id)})):3==t?m.collection("mathList").doc(this.id).update({sept3:!0}).then((t=>{a({title:"已经规划",duration:2e3}),l.getData(l.id)})):4==t&&m.collection("mathList").doc(this.id).update({sept4:!0,status:"已完成"}).then((t=>{a({title:"已确定",duration:2e3}),l.getData(l.id)}))},Drawroute(){JSON.stringify({latitude:this.latitude,longitude:this.longitude})}}},[["render",function(t,a,g,m,b,k){const D=c,v=f,x=_,C=r,L=p,j=h,w=y;return l(),e(D,{class:"page-box"},{default:d((()=>[s(D,{class:"box"},{default:d((()=>[s(D,{class:"top-left"},{default:d((()=>[s(D,{class:"title"},{default:d((()=>[u(" 基本信息 ")])),_:1}),s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("地点名称：")])),_:1}),u(o(b.data.address),1)])),_:1}),s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("求救类型：")])),_:1}),u(o(b.data.type),1)])),_:1}),s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("现场视频：")])),_:1}),s(x,{src:b.data.video},null,8,["src"])])),_:1}),s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("求救者信息：")])),_:1}),n("p",null,"姓名："+o(b.data.name)+" 联系方式："+o(b.data.phone)+" 血型："+o(b.data.bloom),1)])),_:1})])),_:1}),s(D,{class:"top-right"},{default:d((()=>[s(D,{class:"title"},{default:d((()=>[u(" 救援位置 ")])),_:1}),s(D,{class:""},{default:d((()=>[s(C,{latitude:b.latitude,longitude:b.longitude},null,8,["latitude","longitude"])])),_:1})])),_:1})])),_:1}),s(D,{class:"box"},{default:d((()=>[s(D,{class:"card"},{default:d((()=>[s(D,{class:"card-title"},{default:d((()=>[u(" 应答上报 ")])),_:1}),s(D,{class:"content-box"},{default:d((()=>[s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("求救时间：")])),_:1}),u(o(b.data.date),1)])),_:1}),s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("事件类型：")])),_:1}),u(o(b.data.type),1)])),_:1}),s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("初步处理:")])),_:1}),s(L,{value:"",placeholder:"输入处理建议"})])),_:1}),b.data.sept1?(l(),e(D,{key:1,class:"status-view"},{default:d((()=>[u(" 已完成 ")])),_:1})):(l(),e(D,{key:0,class:"bottom-btn"},{default:d((()=>[s(j,{type:"primary",onClick:a[0]||(a[0]=t=>k.changData(1))},{default:d((()=>[u("确定应答")])),_:1})])),_:1}))])),_:1})])),_:1}),b.data.sept1?(l(),e(D,{key:0,class:"card"},{default:d((()=>[s(D,{class:"card-title"},{default:d((()=>[u(" 处理意见 ")])),_:1}),s(D,{class:"content-box"},{default:d((()=>[s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("应答时间：")])),_:1}),u(o(b.data.date),1)])),_:1}),s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("处理人：")])),_:1}),u(o(b.data.saverName),1)])),_:1}),s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("处理意见:")])),_:1}),s(L,{value:"",placeholder:"输入处理建议"})])),_:1}),s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("处理状态：")])),_:1}),s(v,{style:{color:"red"}},{default:d((()=>[u(o(b.data.sept2?"已通过":"未确定"),1)])),_:1})])),_:1}),b.data.sept2?(l(),e(D,{key:1,class:"status-view"},{default:d((()=>[u(" 已完成 ")])),_:1})):(l(),e(D,{key:0,class:"bottom-btn"},{default:d((()=>[s(j,{type:"primary",onClick:a[1]||(a[1]=t=>k.changData(2))},{default:d((()=>[u("确定")])),_:1})])),_:1}))])),_:1})])),_:1})):i("",!0),b.data.sept2?(l(),e(D,{key:1,class:"card"},{default:d((()=>[s(D,{class:"card-title"},{default:d((()=>[u(" 路径规划 ")])),_:1}),s(D,{class:"content-box"},{default:d((()=>[b.data.sept3?(l(),e(D,{key:0,class:""},{default:d((()=>[s(w,{src:"/admin/assets/map.b9b7c8a9.jpg",mode:""})])),_:1})):(l(),e(D,{key:1,class:"bottom-btn"},{default:d((()=>[s(j,{type:"primary",onClick:a[2]||(a[2]=t=>k.changData(3))},{default:d((()=>[u("生成路径")])),_:1})])),_:1}))])),_:1})])),_:1})):i("",!0),b.data.sept3?(l(),e(D,{key:2,class:"card"},{default:d((()=>[s(D,{class:"card-title"},{default:d((()=>[u(" 路径选择 ")])),_:1}),s(D,{class:"content-box"},{default:d((()=>[s(D,{class:"route-btn"},{default:d((()=>[s(j,{type:"default",style:{"background-color":"#18BC37"},onClick:a[3]||(a[3]=t=>b.route="路径1")},{default:d((()=>[u("路径1（推荐）")])),_:1}),s(j,{type:"default",onClick:a[4]||(a[4]=t=>b.route="路径2")},{default:d((()=>[u("路径2")])),_:1}),s(j,{type:"default",onClick:a[5]||(a[5]=t=>b.route="路径3")},{default:d((()=>[u("路径3")])),_:1})])),_:1}),s(D,null,{default:d((()=>[s(v,null,{default:d((()=>[u("已选择的路径：")])),_:1}),s(v,{style:{color:"orange"}},{default:d((()=>[u(o(b.route),1)])),_:1})])),_:1}),b.data.sept4?(l(),e(D,{key:1,class:"status-view"},{default:d((()=>[u(" 已完成 ")])),_:1})):(l(),e(D,{key:0,class:"bottom-btn"},{default:d((()=>[s(j,{type:"primary",onClick:a[6]||(a[6]=t=>k.changData(4))},{default:d((()=>[u("确定")])),_:1})])),_:1}))])),_:1})])),_:1})):i("",!0)])),_:1})])),_:1})}],["__scopeId","data-v-43641317"]]);export{b as default};
